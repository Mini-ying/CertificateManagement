(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0fce51ca"],{5651:function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"design"},[i("div",{staticClass:"title"},[t._v("自定义证书")]),i("div",{staticClass:"huabu"},[i("div",{staticClass:"operator-area"},[t._v(" 宽度： "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.value1,expression:"value1"}],staticClass:"input1",attrs:{type:"text",name:"width"},domProps:{value:t.value1},on:{input:function(e){e.target.composing||(t.value1=e.target.value)}}}),t._v(" 高度： "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.value2,expression:"value2"}],staticClass:"input1",attrs:{type:"text",name:"height"},domProps:{value:t.value2},on:{input:function(e){e.target.composing||(t.value2=e.target.value)}}}),i("button",{staticClass:"button1",on:{click:t.changeSize}},[t._v("创建画布")]),i("p",[t._v("Tips:先创建画布再自定义设计证书")]),i("br"),i("button",{staticClass:"button1",style:{border:this.textFlag?"1px solid blue":""},on:{click:function(e){return t.addElement(1)}}},[t._v(" 添加文本")]),t._v(" "),i("button",{staticClass:"button1",style:{border:this.lineFlag?"1px solid blue":""},on:{click:function(e){return t.addElement(2)}}},[t._v(" 添加线条")]),t._v(" "),i("button",{staticClass:"button1",style:{border:this.imgFlag?"1px solid blue":""},on:{click:function(e){return t.addElement(3)}}},[t._v(" 添加图片")]),t._v(" "),t.textFlag?i("div",{staticStyle:{"margin-top":"20px"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.text,expression:"text"}],staticStyle:{width:"200px",height:"50px"},attrs:{type:"text"},domProps:{value:t.text},on:{input:function(e){e.target.composing||(t.text=e.target.value)}}}),i("button",{staticClass:"button3",on:{click:function(e){return t.addText()}}},[t._v(" "+t._s(this.textActiveIndex>=0?"修改":"添加")+" ")]),i("br"),i("div",{staticClass:"style1"},[t._v(" x: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.textPos.x,expression:"textPos.x"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.textPos.x},on:{input:function(e){e.target.composing||t.$set(t.textPos,"x",e.target.value)}}}),t._v(" y: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.textPos.y,expression:"textPos.y"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.textPos.y},on:{input:function(e){e.target.composing||t.$set(t.textPos,"y",e.target.value)}}}),t._v(" 字号: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fontSize,expression:"fontSize"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.fontSize},on:{input:function(e){e.target.composing||(t.fontSize=e.target.value)}}}),i("br")]),t._v(" 颜色: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.fontColor,expression:"fontColor"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.fontColor},on:{input:function(e){e.target.composing||(t.fontColor=e.target.value)}}}),t.textActiveIndex>=0?i("button",{staticClass:"button1",on:{click:function(e){return t.notEditor(1)}}},[t._v(" 终止修改 ")]):t._e(),i("p",[t._v("tips:点击已有文字进行编辑")])]):t._e(),t.lineFlag?i("div",{staticStyle:{"margin-top":"20px"}},[i("p",[t._v("Tips:画新路径前先终止上一条路径")]),i("button",{staticClass:"button1",on:{click:function(e){return t.notEditor(2)}}},[t._v("终止划线")])]):t._e(),t.imgFlag?i("div",{staticStyle:{"margin-top":"20px"}},[i("input",{ref:"img",attrs:{type:"file"},on:{change:function(e){return t.getChange()}}}),i("div",{staticStyle:{border:"3px solid yellow",width:"220px",padding:"10px",margin:"20px","min-height":"200px"}},[i("img",{staticStyle:{width:"200px"},attrs:{src:t.src,alt:""}})]),i("div",{staticClass:"style1"},[t._v(" width: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgSize.width,expression:"imgSize.width"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.imgSize.width},on:{input:function(e){e.target.composing||t.$set(t.imgSize,"width",e.target.value)}}}),t._v(" height: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgSize.height,expression:"imgSize.height"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.imgSize.height},on:{input:function(e){e.target.composing||t.$set(t.imgSize,"height",e.target.value)}}})]),t._v(" x: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgPos.x,expression:"imgPos.x"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.imgPos.x},on:{input:function(e){e.target.composing||t.$set(t.imgPos,"x",e.target.value)}}}),t._v(" y: "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.imgPos.y,expression:"imgPos.y"}],staticClass:"input",attrs:{type:"text",name:"",id:""},domProps:{value:t.imgPos.y},on:{input:function(e){e.target.composing||t.$set(t.imgPos,"y",e.target.value)}}}),i("button",{staticClass:"button1",on:{click:function(e){return t.addImg()}}},[t._v("添加图片")]),i("p",[t._v("Tips:可通过拖拽改变图片位置")])]):t._e(),i("hr"),i("br"),i("button",{staticClass:"button2",on:{click:t.download}},[t._v("保存为图片")])]),i("div",{staticClass:"show-area"},[i("v-stage",{ref:"stage",attrs:{config:t.canvasData.stage},on:{mousedown:t.drawLine}},[i("v-layer",[t._l(t.canvasData.texts,(function(e,a){return i("v-text",{key:e.id,attrs:{config:e},on:{mousedown:function(e){return t.textEditor(e,a)}}})})),t._l(t.canvasData.lines,(function(t){return i("v-path",{key:t.id,attrs:{config:t}})})),t._l(t.canvasData.imgs,(function(e,a){return i("v-image",{key:e.id,attrs:{config:e},on:{dragend:function(e){return t.dragEvent(e,a)}}})}))],2)],1)],1)])])},n=[],s=(i("159b"),i("cb29"),i("a434"),i("d81d"),i("99af"),i("a9e3"),{components:{},data:function(){return{UserInfo:{id:""},text:"",value1:500,value2:600,textFlag:!1,textActiveIndex:-1,textPos:{x:100,y:100},imgPos:{x:100,y:100},imgSize:{width:200,height:200},fontSize:20,fontColor:"red",lineFlag:!1,lineData:"100,200,200,100",pathPoints:[],imgFlag:!1,lineActiveIndex:0,imgActiveIndex:-1,onloadImgsNum:0,src:"",canvasData:{stage:{width:0,height:0},texts:[],lines:[],imgs:[],imgList:[]},oldCanvasData:{}}},mounted:function(){this.UserInfo.id=this.$route.query.id,document.querySelector("canvas").style.border="1px solid blue"},created:function(){var t=this;this.oldCanvasData.imgList&&this.oldCanvasData.imgList.forEach((function(e,i){var a=new Image;a.src=e,a.onload=function(){t.oldCanvasData.imgs[i].image=a,t.onloadImgsNum+=1}}))},watch:{onloadImgsNum:{immediate:!0,deep:!0,handler:function(t){t==(this.oldCanvasData.imgList&&this.oldCanvasData.imgList.length)&&(this.canvasData=this.oldCanvasData)}}},methods:{textEditor:function(t,e){this.textActiveIndex=e;var i=t.target.attrs,a=i.x,n=i.y,s=i.fill,o=i.fontSize;this.textPos={x:a,y:n},this.fontColor=s,this.fontSize=o},dragEvent:function(t,e){var i=t.target.attrs,a=i.width,n=i.height,s=i.x,o=i.y,r=i.draggable,c=i.image;this.canvasData.imgs.splice(e,1,{width:a,height:n,x:s,y:o,draggable:r,image:c})},download:function(){var t=document.querySelector("canvas"),e=t.toDataURL("image/png"),i=document.createElement("a");i.download=(new Date).getTime(),i.href=e,i.click(),this.canvasData.imgList=this.canvasData.imgs.map((function(t){return t.image.src})),console.log("模拟json数据",this.canvasData)},getChange:function(){var t=this,e=this.$refs.img.files[0],i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t.src=e.target.result}},drawLine:function(){if(this.lineFlag){var t="",e=this.$refs.stage.getNode().getPointerPosition();this.pathPoints.push(e.x),this.pathPoints.push(e.y);for(var i=0;i<this.pathPoints.length;i+=2)0==i?t+="M".concat(this.pathPoints[i]," ").concat(this.pathPoints[i+1]," "):(this.pathPoints.length,t+="L".concat(this.pathPoints[i]," ").concat(this.pathPoints[i+1]," "));var a={x:0,y:0,stroke:"blue",strokeWidth:3,data:t};0==this.lineActiveIndex?this.canvasData.lines.push(a):this.canvasData.lines.splice(this.lineActiveIndex,1,a)}},notEditor:function(t){1==t?this.textActiveIndex=-1:2==t&&(this.lineActiveIndex=this.canvasData.lines.length,this.canvasData.lines.push({}),this.pathPoints=[],this.lineFlag=!1)},addImg:function(){var t=this,e=this.canvasData.imgs.length,i=new Image;i.src=this.src,i.onload=function(){t.canvasData.imgs[e].image=i};var a={x:Number(this.imgPos.x),y:Number(this.imgPos.y),width:Number(this.imgSize.width),height:Number(this.imgSize.height),image:null,draggable:!0};this.canvasData.imgs.push(a)},addText:function(){var t={x:Number(this.textPos.x),y:Number(this.textPos.y),text:this.text,fontSize:this.fontSize,fill:this.fontColor};this.textActiveIndex>=0?this.canvasData.texts.splice(this.textActiveIndex,1,t):(this.canvasData.texts.push(t),this.textActiveIndex=this.canvasData.texts.length-1)},addElement:function(t){this.lineFlag=!1,this.imgFlag=!1,this.textFlag=!1,this.lineActiveIndex=-1,this.textActiveIndex=-1,this.imgActiveIndex=-1,1==t?this.textFlag=!0:2==t?this.lineFlag=!0:3==t&&(this.imgFlag=!0)},changeSize:function(){this.canvasData.stage.width=Number(this.value1),this.canvasData.stage.height=Number(this.value2)}}}),o=s,r=(i("9890"),i("2877")),c=Object(r["a"])(o,a,n,!1,null,null,null);e["default"]=c.exports},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,i){var a=i("1d80"),n=i("5899"),s="["+n+"]",o=RegExp("^"+s+s+"*"),r=RegExp(s+s+"*$"),c=function(t){return function(e){var i=String(a(e));return 1&t&&(i=i.replace(o,"")),2&t&&(i=i.replace(r,"")),i}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,i){var a=i("861d"),n=i("d2bb");t.exports=function(t,e,i){var s,o;return n&&"function"==typeof(s=e.constructor)&&s!==i&&a(o=s.prototype)&&o!==i.prototype&&n(t,o),t}},"81d5":function(t,e,i){"use strict";var a=i("7b0b"),n=i("23cb"),s=i("50c4");t.exports=function(t){var e=a(this),i=s(e.length),o=arguments.length,r=n(o>1?arguments[1]:void 0,i),c=o>2?arguments[2]:void 0,l=void 0===c?i:n(c,i);while(l>r)e[r++]=t;return e}},9890:function(t,e,i){"use strict";i("e34aa")},"99af":function(t,e,i){"use strict";var a=i("23e7"),n=i("d039"),s=i("e8b5"),o=i("861d"),r=i("7b0b"),c=i("50c4"),l=i("8418"),u=i("65f0"),d=i("1dde"),g=i("b622"),v=i("2d00"),h=g("isConcatSpreadable"),m=9007199254740991,p="Maximum allowed index exceeded",f=v>=51||!n((function(){var t=[];return t[h]=!1,t.concat()[0]!==t})),x=d("concat"),b=function(t){if(!o(t))return!1;var e=t[h];return void 0!==e?!!e:s(t)},y=!f||!x;a({target:"Array",proto:!0,forced:y},{concat:function(t){var e,i,a,n,s,o=r(this),d=u(o,0),g=0;for(e=-1,a=arguments.length;e<a;e++)if(s=-1===e?o:arguments[e],b(s)){if(n=c(s.length),g+n>m)throw TypeError(p);for(i=0;i<n;i++,g++)i in s&&l(d,g,s[i])}else{if(g>=m)throw TypeError(p);l(d,g++,s)}return d.length=g,d}})},a434:function(t,e,i){"use strict";var a=i("23e7"),n=i("23cb"),s=i("a691"),o=i("50c4"),r=i("7b0b"),c=i("65f0"),l=i("8418"),u=i("1dde"),d=u("splice"),g=Math.max,v=Math.min,h=9007199254740991,m="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d},{splice:function(t,e){var i,a,u,d,p,f,x=r(this),b=o(x.length),y=n(t,b),w=arguments.length;if(0===w?i=a=0:1===w?(i=0,a=b-y):(i=w-2,a=v(g(s(e),0),b-y)),b+i-a>h)throw TypeError(m);for(u=c(x,a),d=0;d<a;d++)p=y+d,p in x&&l(u,d,x[p]);if(u.length=a,i<a){for(d=y;d<b-a;d++)p=d+a,f=d+i,p in x?x[f]=x[p]:delete x[f];for(d=b;d>b-a+i;d--)delete x[d-1]}else if(i>a)for(d=b-a;d>y;d--)p=d+a-1,f=d+i-1,p in x?x[f]=x[p]:delete x[f];for(d=0;d<i;d++)x[d+y]=arguments[d+2];return x.length=b-a+i,u}})},a9e3:function(t,e,i){"use strict";var a=i("83ab"),n=i("da84"),s=i("94ca"),o=i("6eeb"),r=i("5135"),c=i("c6b6"),l=i("7156"),u=i("c04e"),d=i("d039"),g=i("7c73"),v=i("241c").f,h=i("06cf").f,m=i("9bf2").f,p=i("58a8").trim,f="Number",x=n[f],b=x.prototype,y=c(g(b))==f,w=function(t){var e,i,a,n,s,o,r,c,l=u(t,!1);if("string"==typeof l&&l.length>2)if(l=p(l),e=l.charCodeAt(0),43===e||45===e){if(i=l.charCodeAt(2),88===i||120===i)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:a=2,n=49;break;case 79:case 111:a=8,n=55;break;default:return+l}for(s=l.slice(2),o=s.length,r=0;r<o;r++)if(c=s.charCodeAt(r),c<48||c>n)return NaN;return parseInt(s,a)}return+l};if(s(f,!x(" 0o1")||!x("0b1")||x("+0x1"))){for(var P,C=function(t){var e=arguments.length<1?0:t,i=this;return i instanceof C&&(y?d((function(){b.valueOf.call(i)})):c(i)!=f)?l(new x(w(e)),i,C):w(e)},_=a?v(x):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),I=0;_.length>I;I++)r(x,P=_[I])&&!r(C,P)&&m(C,P,h(x,P));C.prototype=b,b.constructor=C,o(n,f,C)}},cb29:function(t,e,i){var a=i("23e7"),n=i("81d5"),s=i("44d2");a({target:"Array",proto:!0},{fill:n}),s("fill")},d81d:function(t,e,i){"use strict";var a=i("23e7"),n=i("b727").map,s=i("1dde"),o=s("map");a({target:"Array",proto:!0,forced:!o},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},e34aa:function(t,e,i){}}]);
//# sourceMappingURL=chunk-0fce51ca.aa2f2904.js.map